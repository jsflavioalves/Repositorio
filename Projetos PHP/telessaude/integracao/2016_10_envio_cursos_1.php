<?php

$blacklist = ["55313027620", "00698242319", "60622333305", "10775214647", 
"43925251200", "00843337230", "06127353890", "60011512377", "01553653394", 
"00771425430", "04266566360", "67295045368", "89860624372", "60924154373", 
"10730122719", "97171271668", "40502214899", "24989907809", "08314591661", "95317198291", 
"17847647877", "01248986105", "41083172620", "43925550895", "02362837319", "73243655072", 
"31510084886", "96602929372", "10928315681", "09083757609", "41060695391", "93690584515", 
"06518205610", "02145210369", "96459530068", "60379600110", "04027057694", "72817488334", 
"35298471862", "70692874372", "11562499700", "35112194855", "40037004816", "94622302349", 
"04931248616", "11213737800", "03720563006", "13299982605", "04869319357", "25609939453", 
"52429083272", "64376818372", "11238760708", "52705480200", "04694952358", "26625457809", 
"08034416657", "07175621400", "89540409500", "50751395315", "44269056304", "00473490340", 
"03027909690", "16989678372", "11243792663", "32387791843", "10228011639", "00739872559", "04209878359", "09453353698", "05121898622", "02275224270", 
"39454398504", "13588261702", "34111668860", "04166090585", "65501918315", "12188199600", "97488267672", "37998331372", "08448977602", "29153239091", "05489714638", "12879857775", "02779679026", "06406178912", "31297658833", "06658656436", "09054688483", "24276570344", "51746735287", "89638980320", "05222594300", "07668515402", "99269252353", "96759860004", "97959502668", "05037799546", "10195568702", "05104338479", "04689155674", "04475994616", "63320908391", "09802249696", "06542614664", "04235678450", "03618713681", "70964530163", "51847930204", "60132137399", "97401765187", "02693032431", "12642635708", "09075796633", "83419250010", "03619987670", "01274950619", "01619081016", "05924838358", "03928354604", "06726388608", "03285082500", "83014047015", "00609575570", "01506112340", "02423394330", "12786974895", "04667909617", "00881507555", "08502687450", "27452069587", "04088877969", "01735044938", "05432864363", "64839524068", "01696522110", "03685997793", "64738639315", "09450265445", "05224585309", "01709292300", "08529561856", "45664030178", "04342775921", "04761212306", "45563971899", "07083915679", "09476503696", "12990319603", "55299270763", "05180567327", "07561221630", "03616608392", "06239066516", "10384277624", "45789981852", "71764470397", "60384102360", "52497062234", "16868757387", "01312620684", "03408637300", "11427255610", "03424947164", "40263463826", "22041030801", "06913098847", "96626283391", "01781381348", 
"01368251684", "28541800890", "84169540620", "03647646946", "00256496714", "04335410328", "02540844278", 
"60048238309", "75978580278", "05881363361", "08721951632", "05524400940", "02493854306", 
"41739000234", "59159855991", "69512175304", "10413226662",
"93714807187", "85841724592", "01546603379", "63057352391",
"63057352391",
"93714807187", "85841724592", "01546603379"];

function createNewArrayCPFS($cpfs) {
	global $blacklist;
	$newsCPFS = array();
	for($i=0;$i<count($cpfs);$i++) {
		if(validaCPF($cpfs[$i])) {
			if(!in_array($cpfs[$i], $blacklist)) {
				$newsCPFS[] = $cpfs[$i];
			} 
		}
	}
	return $newsCPFS;
}

function validaCPF($cpf = null) {
 
    // Verifica se um número foi informado
    if(empty($cpf)) {
        return false;
    }
 
    // Elimina possivel mascara
    $cpf = @ereg_replace('[^0-9]', '', $cpf);
    $cpf = str_pad($cpf, 11, '0', STR_PAD_LEFT);
     
    // Verifica se o numero de digitos informados é igual a 11 
    if (strlen($cpf) != 11) {
        return false;
    }
    // Verifica se nenhuma das sequências invalidas abaixo 
    // foi digitada. Caso afirmativo, retorna falso
    else if ($cpf == '00000000000' || 
        $cpf == '11111111111' || 
        $cpf == '22222222222' || 
        $cpf == '33333333333' || 
        $cpf == '44444444444' || 
        $cpf == '55555555555' || 
        $cpf == '66666666666' || 
        $cpf == '77777777777' || 
        $cpf == '88888888888' || 
        $cpf == '99999999999') {
        return false;
     // Calcula os digitos verificadores para verificar se o
     // CPF é válido
     } else {   
         
        for ($t = 9; $t < 11; $t++) {
             
            for ($d = 0, $c = 0; $c < $t; $c++) {
                $d += $cpf{$c} * (($t + 1) - $c);
            }
            $d = ((10 * $d) % 11) % 10;
            if ($cpf{$c} != $d) {
                return false;
            }
        }
 
        return true;
    }
}




header("Content-Type: text/html; charset=utf-8");
require("classes/integra.class.php");
error_reporting(E_ALL);
ini_set("display_errors", 1);
set_time_limit(0);


////////////////////////////////////////////////////////////////
//1 - Cursos
$curso = new TeleeducacaoCurso("0000088", "102016");
$curso->addCurso("CATTB2016B", "01/10/2016 00:00:00", "30/03/2017 00:00:00", "2000", "L01.178.847.652", "3600", 
//matriculados
createNewArrayCPFS(["11238760708", "22174945894", "00609575570", "93714807187", "91327083191", "05881363361", "99902427049", "44922426434", "06406178912", "80766315720", "00450141918", "01372152660", "00739872559", "43472850353", "05104338479", "03285082500", "19081000870", "36329444404", "85498599404", "52705480200", "04869319357", "13299982605", "85841724592", "30989728404", "33859361287", "92308155353", "03424947164", "05180567327", "10928315681", "02540844278", "12990319603", "04027057694", "45789981852", "08034416657", "26573377320", "08448977602", "07175621400", "01696522110", "60011512377", "52695930925", "06239066516", "01709292300", "01260249603", "02168781362", "69512175304", "01823543936", "07454584403", "05778622600", "01546603379", "02909544877", "09212209874", "00458431800", "62130790097", "07223539607", "89540409500", "63057352391", "19887758841", "05627195630", "97488267672", "57939632272", "04667909617", "00068020050", "31932398368", "60132137399", "04583998686", "00419235612", "04761212306", "51847930204", "43925251200", "37998331372", "75978580278", "04335410328", "96759860004", "09450265445", "93349084320", "02158096373", "00166554359", "10730122719", "11243792663", "17847647877", "07561221630", "23244844391", "09453353698", "06754615613", "96626283391", "81351356704", "05727793300", "08721951632", "25609939453", "56133766115", "95317198291", "07976962701", "55313027620", "59129093015", "94877297391", "22041030801", "00502289945", "07578642871", "35112194855", "04106667428", "52429083272", "58051473272", "70692874372", "21089057666", "01553653394", "01781381348", "52497062234", "08502687450", "65501918315", "60384102360", "99597144387", "00054340500", "05924838358", "34111668860", "54162025720", "04555772423", "04689155674", "01083964445", "93690584515", "02423394330", "04030530648", "84169540620", "11687423660", "25529967876", "50751395315", "04088877969", "72144440115", "89860624372", "00473490340", "16868757387", "10413226662", "04209878359", "09567108676", "09476503696", "03720563006", "75138875787", "03616608392", "03496839309", "01312620684", "05037799546", "01854335456", "03618713681", "41083172620", "73243655072", "01090293569", "48493481300", "02145210369", "09802249696", "04166090585", "03647646946", "01290107076", "26625457809", "00881507555", "01248986105", "00843337230", "98770656768", "00978858603", "10384277624", "02334832928", "60241144191", "06280047587", "70964530163", "06518205610", "27452069587", "89241622334", "24989907809", "99269252353", "04235678450", "71764470397", "04694952358", "04266566360", "55299270763", "05224585309", "01269481606", "10775214647", "00698242319", "09399046400", "60622333305", "03746320658", "00755045963", "03619987670", "03027909690", "05121898622", "86358480200", "06726388608", "06542614664", "07668515402", "83419250010", "02998929486", "02888463547", "72817488334", "06127353890", "12879857775", "89638980320", "12188199600", "04931248616", "97879150668", "01506112340", "67295045368", "40263463826", "07083915679", "28694989859", "02275224270", "10735857784", "31297658833", "06752086966", "41925831353", "11562499700", "34014410862", "02362837319", "43737825897", "05794229764", "03928354604", "05747162624", "97959502668", "03408637300", "00173730264", "07174042422", "95396284315", "73424013153", "83014047015", "64839524068", "94622302349", "43925550895", "08150410635", "06467757408", "04342775921", "97401765187", "01274950619", "40502214899", "95704329004", "01735044938", "96459530068", "02693032431", "04475994616", "95791531249", "10228011639", "05458356829", "64376818372", "45664030178", "05489714638", "45563971899", "00256496714", "63320908391", "16989678372", "60048238309", "02493854306", "64738639315", "07493684707", "24276570344", "52451232315", "00771425430", "32387791843", "82063869634", "08314591661", "60924154373", "40293297215", "32514188822", "13588261702", "00712374370", "60379600110", "09054688483", "51746735287", "10221410740", "67513140430", "08819357860", "29153239091", "11150867663", "09075796633", "01619081016", "86546260620", "98800680097", "40037004816", "00657642347", "09083757609", "38231522204", "05222594300", "71943668353", "04738522841", "03760476740", "28541800890", "39454398504", "58760598468", "05230124432", "59159855991", "00922979359", "24261505304", "05069166425", "07697551780", "16440873830", "41739000234", "35298471862", "29001933890", "11213737800", "41060695391", "02779679026", "57068194168", "03685997793", "95087176615", "44269056304", "06658656436", "06913098847", "01368251684", "11427255610", "49342231268", "12642635708", "02409963480", "60111405300", "69649693300", "96546840391", "97171271668", "05432864363", "09900040660", "10195568702", "08529561856", "08330766632", "96602929372", "12786974895", "31510084886", "05524400940", "06772958128", "11269956817"]), 
//concluintes
createNewArrayCPFS(["11238760708", "22174945894", "00609575570", "93714807187", "91327083191", "05881363361", "99902427049", "44922426434", "06406178912", "80766315720", "00450141918", "01372152660", "00739872559", "43472850353", "05104338479", "03285082500", "19081000870", "36329444404", "85498599404", "52705480200", "04869319357", "13299982605", "85841724592", "30989728404", "33859361287", "92308155353", "03424947164", "05180567327", "10928315681", "02540844278", "12990319603", "04027057694", "45789981852", "08034416657", "26573377320", "08448977602", "07175621400", "01696522110", "60011512377", "52695930925", "06239066516", "01709292300", "01260249603", "02168781362", "69512175304", "01823543936", "07454584403", "05778622600", "01546603379", "02909544877", "09212209874", "00458431800"]), 
//evadidos
createNewArrayCPFS(["62130790097", "07223539607", "89540409500", "63057352391", "19887758841", "05627195630", "97488267672", "57939632272", "04667909617", "00068020050", "31932398368", "60132137399", "04583998686", "00419235612", "04761212306", "51847930204", "43925251200", "37998331372", "75978580278", "04335410328", "96759860004", "09450265445", "93349084320", "02158096373", "00166554359", "10730122719", "11243792663", "17847647877", "07561221630", "23244844391", "09453353698", "06754615613", "96626283391", "81351356704", "05727793300", "08721951632", "25609939453", "56133766115", "95317198291", "07976962701", "55313027620", "59129093015", "94877297391", "22041030801", "00502289945", "07578642871", "35112194855", "04106667428", "52429083272", "58051473272", "70692874372", "21089057666", "01553653394", "01781381348", "52497062234", "08502687450", "65501918315", "60384102360", "99597144387", "00054340500", "05924838358", "34111668860", "54162025720", "04555772423", "04689155674", "01083964445", "93690584515", "02423394330", "04030530648", "84169540620", "11687423660", "25529967876", "50751395315", "04088877969", "72144440115", "89860624372", "00473490340", "16868757387", "10413226662", "04209878359", "09567108676", "09476503696", "03720563006", "75138875787", "03616608392", "03496839309", "01312620684", "05037799546", "01854335456", "03618713681", "41083172620", "73243655072", "01090293569", "48493481300", "02145210369", "09802249696", "04166090585", "03647646946", "01290107076", "26625457809", "00881507555", "01248986105", "00843337230", "98770656768", "00978858603", "10384277624", "02334832928", "60241144191", "06280047587", "70964530163", "06518205610", "27452069587", "89241622334", "24989907809", "99269252353", "04235678450", "71764470397", "04694952358", "04266566360", "55299270763", "05224585309", "01269481606", "10775214647", "00698242319", "09399046400", "60622333305", "03746320658", "00755045963", "03619987670", "03027909690", "05121898622", "86358480200", "06726388608", "06542614664", "07668515402", "83419250010", "02998929486", "02888463547", "72817488334", "06127353890", "12879857775", "89638980320", "12188199600", "04931248616", "97879150668", "01506112340", "67295045368", "40263463826", "07083915679", "28694989859", "02275224270", "10735857784", "31297658833", "06752086966", "41925831353", "11562499700", "34014410862", "02362837319", "43737825897", "05794229764", "03928354604", "05747162624", "97959502668", "03408637300", "00173730264", "07174042422", "95396284315", "73424013153", "83014047015", "64839524068", "94622302349", "43925550895", "08150410635", "06467757408", "04342775921", "97401765187", "01274950619", "40502214899", "95704329004", "01735044938", "96459530068", "02693032431", "04475994616", "95791531249", "10228011639", "05458356829", "64376818372", "45664030178", "05489714638", "45563971899", "00256496714", "63320908391", "16989678372", "60048238309", "02493854306", "64738639315", "07493684707", "24276570344", "52451232315", "00771425430", "32387791843", "82063869634", "08314591661", "60924154373", "40293297215", "32514188822", "13588261702", "00712374370", "60379600110", "09054688483", "51746735287", "10221410740", "67513140430", "08819357860", "29153239091", "11150867663", "09075796633", "01619081016", "86546260620", "98800680097", "40037004816", "00657642347", "09083757609", "38231522204", "05222594300", "71943668353", "04738522841", "03760476740", "28541800890", "39454398504", "58760598468", "05230124432", "59159855991", "00922979359", "24261505304", "05069166425", "07697551780", "16440873830", "41739000234", "35298471862", "29001933890", "11213737800", "41060695391", "02779679026", "57068194168", "03685997793", "95087176615", "44269056304", "06658656436", "06913098847", "01368251684", "11427255610", "49342231268", "12642635708", "02409963480", "60111405300", "69649693300", "96546840391", "97171271668", "05432864363", "09900040660", "10195568702", "08529561856", "08330766632", "96602929372", "12786974895", "31510084886", "05524400940", "06772958128", "11269956817"]), 
//reprovados
[]);



////////////////////////////////////////////////////////////////
//INTEGRA
$url = 'http://smart.telessaude.ufrn.br/';
$integra = new Integra("ad9c2aa3622033fc9d79703fde22a4e892641221");



////////////////////////////////////////////////////////////////
//1 - Cursos

echo "<br/><br/><fieldset><legend>Cursos</legend>";
$dados_serializados_curso = Integra::serializar(TipoDeDados::JSON, $curso);
echo "<h3>.: Dados Serializados - Curso :.</h3>";
echo $dados_serializados_curso;
$resposta_curso = $integra->enviarDados(TipoDeDados::JSON, $url."api/v2/cursos-teleeducacao/?format=json", $dados_serializados_curso);
echo "<h3>.: Resposta do Servidor - Curso :.</h3>";
echo $resposta_curso;
echo "</fieldset>";





?>