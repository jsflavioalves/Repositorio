<?php


$blacklist = [];

function createNewArrayCPFS($cpfs) {
	global $blacklist;
	$newsCPFS = array();
	for($i=0;$i<count($cpfs);$i++) {
		if(validaCPF($cpfs[$i])) {
			if(!in_array($cpfs[$i], $blacklist)) {
				$newsCPFS[] = $cpfs[$i];
			} 
		}
	}
	return $newsCPFS;
}

function validaCPF($cpf = null) {
 
    // Verifica se um número foi informado
    if(empty($cpf)) {
        return false;
    }
 
    // Elimina possivel mascara
    $cpf = @ereg_replace('[^0-9]', '', $cpf);
    $cpf = str_pad($cpf, 11, '0', STR_PAD_LEFT);
     
    // Verifica se o numero de digitos informados é igual a 11 
    if (strlen($cpf) != 11) {
        return false;
    }
    // Verifica se nenhuma das sequências invalidas abaixo 
    // foi digitada. Caso afirmativo, retorna falso
    else if ($cpf == '00000000000' || 
        $cpf == '11111111111' || 
        $cpf == '22222222222' || 
        $cpf == '33333333333' || 
        $cpf == '44444444444' || 
        $cpf == '55555555555' || 
        $cpf == '66666666666' || 
        $cpf == '77777777777' || 
        $cpf == '88888888888' || 
        $cpf == '99999999999') {
        return false;
     // Calcula os digitos verificadores para verificar se o
     // CPF é válido
     } else {   
         
        for ($t = 9; $t < 11; $t++) {
             
            for ($d = 0, $c = 0; $c < $t; $c++) {
                $d += $cpf{$c} * (($t + 1) - $c);
            }
            $d = ((10 * $d) % 11) % 10;
            if ($cpf{$c} != $d) {
                return false;
            }
        }
 
        return true;
    }
}

function maskInep($inep) {
    $len = strlen($inep);
    if($len < 7){
	    $calc = 7 - $len;
	    $inep = str_repeat('0', $calc).$inep;	
    }
    return $inep;
}




header("Content-Type: text/html; charset=utf-8");
require("classes/integra.class.php");
error_reporting(E_ALL);
ini_set("display_errors", 1);
set_time_limit(0);
require_once('../includes/frameworkajax.php');


$mes_envio = "112018";
$curso = new TeleeducacaoCurso("0000088", $mes_envio);
$atividade = new TeleeducacaoAtividade("0000088", $mes_envio);
$profissionalTeleconsultorias = new ProfissionalSaude("0000088", $mes_envio);



//
$cpfsm = createNewArrayCPFS(['41746694300',
'47349050372',
'38836602304',
'00996177302',
'25716359809',
'36264725315',
'45685452349',
'76020835391',
'63499380382',
'74924117315',
'87365979372',
'51309017387',
'76948382487',
'03085240390',
'90657829315',
'28483839334',
'88906914334',
'41679717391',
'01544679360',
'07220194323',
'01491042354',
'04161723342',
'63061775315',
'34645071300',
'71808906349',
'93515740325',
'48544175368',
'92870830378',
'50236202391',
'12358380300',
'77592581353',
'97845833304',
'60075507374',
'00492771383',
'99358905387',
'29429030310',
'41373804300',
'80836160363',
'03542311383',
'23225408387',
'93359837304',
'02118024339',
'00877038317',
'60384733352',
'52620522315',
'02807910386',
'60042286301',
'60598341323',
'63047446334',
'04865639365',
'86691872304',
'81111797315',
'02674656379',
'03153437378',
'01920679316',
'01185159347',
'61737151391',
'00551726369',
'00573338310',
'48100480397',
'63297051353']);
$cpfsc = createNewArrayCPFS(['41746694300',
'47349050372',
'76020835391',
'51309017387',
'97845833304',
'99358905387',
'03542311383',
'60384733352',
'60598341323',
'04865639365',
'01185159347']);
$cpfsr = createNewArrayCPFS(['07220194323',
'63047446334',
'01920679316']);
$cpfse = createNewArrayCPFS([]);
$codigo 	            = 'CCMACS2018B1';
$datai 					= "01/11/2018 08:00:00";
$dataf 					= "30/11/2018 00:00:00";
$vagas                  = 100; //Número de vagas ofertadas
$chhoraria 			    = 2400; //Carga horaria do curso - Número em minutos
$tema        			= "C04.588.180"; //Tema do curso
$curso->addCurso($codigo, $datai, $dataf, $vagas, $tema, $chhoraria, 
$cpfsm,     //matriculados
$cpfsc,     //concluintes
$cpfse,     //evadidos
$cpfsr);    //reprovados
$atividade->addAtividade($codigo, $datai, $chhoraria, TipoAtividade::CURSO, $tema);
for($i=0;$i<count($cpfsm);$i++) {
	$sql = "select 	itp.nome, itp.codigo_cbo, itp.estabelecimento_codigo_cnes, coalesce(itp.equipe_codigo_ine, 'null') as equipe_codigo_ine, tu.fl_sexo
from integracao.tb_profissional as itp 
inner join tb_profissional tp on(itp.cpf=replace(replace(tp.nr_cpf, '.', ''), '-', ''))
inner join tb_usuario tu on(tp.ci_profissional=tu.ci_usuario)
where itp.cpf = '" . $cpfsm[$i] . "'";	
	$q = query($sql)->fetch();
	if($q['codigo_cbo'] != '' || $q['estabelecimento_codigo_cnes'] != '') {
		$atividade->addParticipacaoAtividade($codigo, $datai, $cpfsm[$i], 
		$q['codigo_cbo'], maskInep($q['estabelecimento_codigo_cnes']), null, GrauSatisfacao::SATISFEITO);  	
		$fl_sexo = "M";
		if($q['fl_sexo'] == '2'){
			$fl_sexo = "F";
		}
		$profissionalTeleconsultorias->addProfissionalSaude(null, $cpfsm[$i], $q['nome'], maskInep($q['estabelecimento_codigo_cnes']), $q['codigo_cbo'], null, "02", $fl_sexo);
	}
}





//
$cpfsm = createNewArrayCPFS(['46583424215',
'09037451438',
'92364756200',
'01432979299',
'69768749415',
'04638777643',
'17065953874',
'92389929400',
'03914045639',
'10397001606',
'04733316402',
'47865571453',
'38629836334',
'09904813795',
'31703454863',
'35440929134',
'60277009200',
'61833525434',
'06351536456',
'98644920987',
'10614215706',
'08562948616',
'00013905708',
'08297367789',
'19743321870',
'10858905469',
'03397170419',
'03219875432',
'69468265234',
'21292183500',
'02015319760',
'07176137471',
'34501886234',
'99123282568',
'82343942153',
'15177069800',
'08956469601',
'09832684609',
'02206165155',
'05515529642',
'12126142752',
'03952151610',
'40766219801',
'30869712829',
'13331864609',
'57862770030',
'08036819414',
'73647799220',
'75617757334',
'73682969187',
'06101353419',
'12494815703',
'09250386605',
'05508574603',
'08087384610',
'08561327642',
'02468564162',
'08292947167',
'10570042780',
'09683662790',
'85004863768',
'27289305892',
'06844459483',
'08095218650',
'02986340580',
'88645320487',
'04480435131',
'49254340472',
'02898451495',
'03473995843',
'46106502234',
'97098728500',
'05043170913',
'90178807591',
'11203478828',
'08882466680',
'05411847680',
'89807855500',
'08678414600',
'02308514442',
'09347221708',
'05891064499',
'98783890491',
'02269300769',
'05600947607',
'00245723579',
'54642256253',
'86967010204',
'06286767436',
'08279958657',
'13305963662',
'11916845630',
'08591728483',
'09565172776',
'69469032420',
'03995804411',
'95893059204',
'06224575436',
'15879005720',
'08617923601',
'07579310651',
'03883470660',
'05015501439',
'01070905542',
'00834287552',
'14687517781',
'45568659800',
'06049538441',
'79425364320',
'41233794272',
'41341822800',
'08470559494',
'85340022668',
'07138429622',
'04454190674',
'95478930415',
'72478063468',
'77715616168',
'99283220587',
'33029202615',
'03322064670',
'73144215104',
'03422459618',
'41735668320',
'63322862372',
'19695055249',
'04759861645',
'94762392634',
'02437119485',
'65143612268',
'37719629515',
'04007969450',
'82179590130',
'92708188534',
'57080470706',
'60860545415',
'93090161087',
'00099268108',
'21473622808',
'08689579680',
'12617096750',
'12113993708',
'12812146710',
'13070907709',
'07440080696',
'08101436669',
'11085764788',
'35253390898',
'12757790692',
'92644635187',
'34992372880',
'03275233440',
'13465438795',
'66616042391',
'11232857726',
'69228817291',
'12365144756',
'01356428762',
'00748372148',
'01842172107',
'90456114220',
'79714390400',
'00537265619',
'05342496470',
'94944814453',
'76807703791',
'05624962622',
'07732679997',
'38417792805',
'03622948442',
'33420670397',
'07048959860',
'07465891663',
'01764729676',
'04745872666',
'01742913610',
'05723588737',
'03184632458',
'80311989187',
'05609850452',
'76473627120',
'33349078800',
'33570284840',
'44414773253',
'07410162490',
'04831097462',
'30424735890',
'15916778821',
'06129212631',
'10021793603',
'03642547427',
'89961820606',
'96482079172',
'06061690673',
'02456693450',
'07699622626',
'00722649509',
'98315781634',
'94623007120',
'01712668706',
'98911392120',
'01279960108',
'06965102861',
'53401360191',
'13790457701',
'08144007603',
'81962606520',
'36135640682',
'94879400491',
'12164741684',
'80295584491',
'03491731763',
'04668342688',
'01411650492',
'03970745497',
'08219099674',
'07138073771',
'00606829148',
'42890322220',
'13982329639',
'99118033091',
'03672086100',
'08518063680',
'07753130684',
'07008434693',
'05270902710',
'70029814200',
'00750692707',
'05416691417',
'08507991980',
'08864564608',
'08937779609',
'03410162259',
'05600520735',
'09435321674',
'31105735800',
'01319856470',
'13416721667',
'09004647988',
'00245635106',
'10432274669',
'35333044856',
'83044639204',
'93084188149',
'07562792674',
'11694928780',
'10244701725',
'32839838877',
'43731880415',
'00386012148',
'82944989553',
'03596149738',
'05601903603',
'32889734803',
'28220168870',
'52411761287',
'33938091215',
'08101026681',
'08202301629',
'07288932400',
'13108353730',
'88955044968',
'05003902905',
'00034386513',
'06284476639',
'47093277691',
'71966510497',
'04337341161',
'23110237806',
'37511449867',
'00034415203',
'11069464724',
'30757275800',
'00072195550',
'09226707650',
'14374351655',
'13991974606',
'05703142679',
'43917780259',
'78173370206',
'73507946149',
'00095446400',
'69399735591',
'08121000696',
'90223870110',
'97853763700',
'07357750604',
'69080046434',
'00748956131',
'76501299187',
'89732227168',
'09129252725',
'72699590487',
'08486005680',
'97987255491',
'02746687429',
'15235024877',
'86713795234',
'10018246877',
'35984775549',
'29424066821',
'85400718434',
'13800013665',
'04628946493',
'02158792442',
'02446607438',
'23965444204',
'07237522493',
'82144761434',
'05850775501',
'66503906404',
'52293777200',
'34966482879',
'81375832387',
'96318392300',
'72783095572',
'11031561790',
'04437041470',
'07618024600',
'01359930671',
'11771298847',
'60004455398',
'88425398134',
'35767745803',
'03968378679',
'05576861647',
'09261696619',
'43388205272',
'09209499409',
'08895113497',
'03199530761',
'83054073300',
'21686901895',
'19362927420',
'12499213680',
'56695845115',
'59902280234',
'09863204471',
'00414780108',
'69849102268',
'05238300417',
'02550346289',
'05698279659',
'06984717680',
'61833614453',
'07338190879',
'10298889730',
'04099374440',
'93263104187',
'07455299419',
'97075558153',
'00846174464',
'03775175423',
'00376970138',
'34236214865',
'09335185795',
'09655022609',
'84852330425',
'17973434755',
'05452469460',
'05890371452',
'05708979631',
'05905336652',
'08091083645',
'88978605168',
'05006294477',
'03972341474',
'99517485115',
'03375040407',
'97821179515',
'01569122440',
'16668480420',
'91824729391',
'97165867104',
'11093537744',
'11355519799',
'08902707750',
'01819045196',
'57770581400',
'00843146133',
'78286743415',
'01859801129',
'10957895704',
'22750172837',
'96793902504',
'05737597741',
'43909019404',
'34845530813',
'11436435773',
'19597975220',
'04218942293',
'83389164120',
'07240973689',
'97346535120',
'11298559707',
'04175122443',
'45729329806',
'28562481874',
'09880502698',
'13016831759',
'09390891655',
'03409755551',
'20554076861',
'05339865673',
'11043374604',
'02866430140',
'01203968744',
'03487277476',
'14161227701',
'12662599707',
'04443097481',
'28215317880',
'27877558287',
'60653078234',
'95677895172',
'07323873703',
'89933893220',
'35277187880',
'01363410555',
'02789688486',
'79743463453',
'26105266871',
'42477423886',
'70161125190',
'09730569754',
'03861974401',
'75874326715',
'08071348724',
'38675218320',
'10035786671',
'35005559850',
'12531446800',
'34342685884',
'04381944976',
'86932098768',
'10215281616',
'05286753469',
'85614653287',
'00880992530',
'60643296379',
'54199077391',
'44928548434',
'00867019247',
'31311026835',
'05439228713',
'44223773453',
'38590701859',
'40756888875',
'43535623200',
'85402567468',
'10235784680',
'79320023115',
'85310107487',
'03881950451',
'04975489929',
'01166020312',
'00379651904',
'78882095487',
'06162298604',
'72913134220',
'05517246257',
'01751791238',
'28993489572',
'91976936420',
'93544057115',
'76726061404',
'02490556436',
'01991139470',
'07540822457',
'04081278482',
'02927832307',
'08663519656',
'05926613426',
'78738458420',
'92381146504',
'12390171893',
'00677355254',
'09937257751',
'19635983859',
'86633473168',
'22023672848',
'09899393754',
'37802899893',
'05748282305',
'05396059486',
'10173920489',
'01566277361',
'90424280582',
'03636301985',
'02860824111',
'08517201612',
'12108525432',
'74409077287',
'03016565412',
'87946238134',
'01128535440',
'36653775879',
'06912965610',
'04211973665',
'11744427780',
'02336191512',
'13975970898',
'79782418234',
'77742117487',
'12355975639',
'02250370419',
'10316527440',
'17259830794',
'03733304489',
'97990124491',
'25996061600',
'98564544172',
'11423254660',
'08860321727',
'60020143303',
'89820061253',
'02715869231',
'10081477708',
'02718023163',
'08666546662',
'90073444200',
'38228599668',
'85433942449',
'02623164479',
'00309634199',
'08228904703',
'77321600459',
'36395806807',
'87431980400',
'81234856034',
'06545841416',
'02789631450',
'11000971716',
'00228698405',
'02211275184',
'04777312445',
'27942808807',
'03305594195',
'01011025264',
'41873340842',
'11290597740',
'04980331475',
'03375489510',
'74754769104',
'04838207417',
'08444040630',
'92072402204',
'06400880402',
'01284016056',
'30485571803',
'08204716664',
'57851034434',
'04492360646',
'04564843451',
'85022233720',
'62371363200',
'04373406430',
'11807963730',
'05697971109',
'01924382555',
'13427812790',
'02429380609',
'83915656291',
'08264971601',
'10940371685',
'03687051617',
'08340239627',
'01119344190',
'04096409138',
'13749318611',
'00550024204',
'08572118624',
'55802540320',
'05512871609',
'10357393481',
'13167862777',
'05243331147',
'12242161644',
'07370591760',
'03564960406',
'06522732467',
'99903768672',
'05404884614',
'01070049174',
'01735191302',
'94721190930',
'00840004656',
'00997930160',
'09415914769',
'09766569738',
'72782056549',
'46081550320',
'04327580465',
'79847137668',
'07686635716',
'89946707187',
'66318432272',
'10878573763',
'07843035761',
'02696648409',
'02368543139',
'08359692742',
'10338234810',
'16058868823',
'04540403699',
'08302361631',
'12264175745',
'91733014420',
'73073040315',
'13518948709',
'11936128705',
'71952462720',
'04107935400',
'35684011500',
'29124376876',
'77054385268',
'62924095387',
'98805843172',
'13921307600',
'13674946726',
'06843046606',
'37487434400',
'06230732696',
'13435130733',
'82632120225',
'05068749400',
'08565692671',
'72268956334',
'00771146710',
'04770142676',
'51689189134',
'01049074521',
'06376496130',
'11357466641',
'79032540491',
'02430655586',
'34967088830',
'05712021609',
'27882259896',
'32118116802',
'00099113244',
'49263390134',
'66734908615',
'31040039472',
'97165832149',
'57055777291',
'54992079504',
'07885977790',
'07710019676',
'01037880935',
'10753578700',
'02567146490',
'05608852613',
'33691082831',
'46761047404',
'89005821353',
'90663446791',
'06515575696',
'05946595407',
'03889074103',
'76451135020',
'00902913522',
'00794203116',
'06114952952',
'13678207740',
'17130949830',
'07946580673',
'10951498657',
'35345276749',
'67613632415',
'08035646869',
'96757680106',
'64940454215',
'81474776353',
'57628017134',
'00384647138',
'03223006494',
'78433240200',
'96736887534',
'10144000660',
'12649332662',
'64797430400',
'29491878468',
'68758545620',
'16030388843',
'07888502610',
'86858297472',
'12471855750',
'33303592187',
'65307054491',
'87237105434',
'01414576862',
'59429348434',
'07190887989',
'89302729400',
'89608305420',
'06222915647',
'03217275098',
'42906184802',
'62606751191',
'55618030187',
'03353334432',
'85461296149',
'81267681268',
'09317693709',
'02228764760',
'83483659404',
'32396545809',
'08564367718',
'62622986149',
'04060340529',
'08369241778',
'90343140144',
'91455936553',
'70216673372',
'08700063630',
'51829339249',
'95316787234',
'09438504605',
'12732617717',
'07625749410',
'10748197729',
'49567187487',
'91706289472',
'06169161671',
'59605600544',
'19749341287',
'64280101434',
'90937201634',
'03888801478',
'88152260525',
'11487153805',
'76711331400',
'07738472782',
'09116166833',
'98619470434',
'80566588404',
'05089014132',
'98827740678',
'13554970786',
'02939486581',
'06457933610',
'04645032640',
'93344775200',
'03097895167',
'09957830473',
'32504663870',
'01773329723',
'12250094640',
'08396600732',
'14731493714',
'03622167467',
'02063138451',
'04416106416',
'35647586821',
'13793895777',
'80887740120',
'81717032400',
'04784976108',
'05922341421',
'08972720640',
'39285612865',
'02007497905',
'86249509100',
'43724159404',
'46735119568',
'09259010675',
'52425894268',
'01097361330',
'05861983429',
'04242387482',
'05838147431',
'72526700230',
'03936655421',
'08940189655',
'33680494882',
'33872976885',
'41960622889',
'12210247799',
'00621632309',
'07450187698',
'07656907645',
'32182986871',
'13458028625',
'09806513444',
'57666210353',
'32064675515',
'41695348400',
'00333210271',
'39088294291',
'04642123830',
'01097467597',
'98592424100',
'06061421427',
'96448393587',
'10895846608',
'35128107809',
'43692699204',
'00996245162',
'60754303268',
'04366391490',
'71552529215',
'00575074140',
'03447640448',
'06342325170',
'04145902106',
'92062474172',
'04905317681',
'03371121500',
'08965845858',
'01418659380',
'09600983640',
'42420286871',
'33704281808',
'01804379093',
'10088266770',
'42569605468',
'03027346431',
'04581329345',
'05977276435',
'10942147600',
'12082863662',
'98214047153',
'04579896610',
'01388595664',
'70809291487',
'44237316572',
'05337056492',
'04766087402',
'03100751736',
'48957941304',
'36749955819',
'63533944204',
'16247360843',
'09704093705',
'17559323839',
'11727758692',
'12959486803',
'04497628400',
'05794371404',
'05311017465',
'98925490234',
'28571059837',
'71125086220',
'19166844835',
'13113580641',
'12289500674',
'09577317600',
'90829760210',
'05459568625',
'02643009711',
'07184303873',
'50430394349',
'22159417823',
'33470375291',
'09665096761',
'13642788718',
'05891495635',
'05205944609',
'59129530415',
'04938787938',
'01462612911',
'07553783420',
'28587054880',
'95842144620',
'26562971845',
'03335172450',
'31546612807',
'05767370974',
'03602181219',
'00006369324',
'03233217633',
'02747978109',
'01340543346',
'03520459493',
'61692212672',
'02728139156',
'22454006820',
'39801560606',
'92816495191',
'42803942453',
'96478047253',
'02692701160',
'51793750297',
'08997865706',
'00891545174',
'63508346234',
'68777086368',
'89048938104',
'61671630220',
'01256600148',
'10731439708',
'90290801400',
'04179948699',
'02740372469',
'06104102450',
'10961303603',
'11529517699',
'02285490780',
'79536735253',
'00104767413',
'06906725602',
'73572136253',
'39447332668',
'11961116855',
'08943019696',
'29758934856',
'91988845653',
'74511688672',
'14220766600',
'01578531608',
'05675274685',
'00202927598',
'05297831695',
'04075108694',
'62518224300',
'05281129457',
'96188197449',
'00732899656',
'52621731287',
'03375621485',
'21625455860',
'80195059549',
'01044596465',
'14861504708',
'10919634877',
'05276001642',
'83338381468',
'90202309215',
'05362967401',
'04417859809',
'03516353600',
'02154160409',
'02507178671',
'91901537234',
'04390588648',
'05707923632',
'04364405639',
'01132715300',
'07837632710',
'11948955814',
'84358831249',
'65550412772',
'61467596434',
'02543305505',
'07476381602',
'00590092170',
'62064185615',
'72572493420',
'07591992643',
'57857199249',
'28745967873',
'87154463104',
'69174750410',
'12708556622',
'41543420885',
'94929645620',
'31302065823',
'11646554779',
'05561480456',
'44308388449',
'15861882754',
'11719395667',
'07355525760',
'51783690682',
'05721621460',
'02889211193',
'01161605436',
'36762302807',
'07353140631',
'07035857702',
'06491800628',
'08395052642',
'08529746635',
'19642040204',
'10908775601',
'31681984806',
'10526033606',
'27822972871',
'22516499809',
'95560297534',
'44525666854',
'08456588750',
'01777635152',
'87818710159',
'96820365500',
'41341053822',
'05765424660',
'11428407600',
'02909914984',
'05485174361',
'32381013822',
'45297501830',
'10600387658',
'14008650776',
'33212357819',
'80447066315',
'01267228385',
'86742922168',
'02194342478',
'34580352300',
'34226586883',
'07881103736',
'02496140142',
'11610146751',
'11909796751',
'35265485368',
'38876134816',
'03777254479',
'09581214437',
'86850822268',
'67162681620',
'09391130666',
'09681209621',
'01835038301',
'33850333817',
'99833085091',
'09998499720',
'58079459649',
'07484436739',
'05917987602',
'10842732764',
'05880604616',
'97893080787',
'07414446662',
'60979194091',
'69635781415',
'98772686715',
'83880283753',
'02004339705',
'88551628453',
'40988627434',
'33417761840',
'78643449504',
'30688451810',
'88722260153',
'88248550591',
'06491765610',
'91506921191',
'03526468451',
'25987066840',
'28855841491',
'33291268172',
'02008945103',
'06948856659',
'08030112700',
'41069440817',
'30916203875',
'29236584268',
'09981763705',
'11743389469',
'06600163623',
'36415030191',
'02277853470',
'10808857495',
'92524486168',
'56262175415',
'05370103437',
'58473351487',
'25246801420',
'03836744414',
'99185482668',
'90879058587',
'35681632415',
'57429782434',
'69244499487',
'05495656636',
'00835529525',
'04738282603']);
$cpfsc = createNewArrayCPFS(['92364756200',
'01432979299',
'04638777643',
'17065953874',
'47865571453',
'09904813795',
'31703454863',
'06351536456',
'10614215706',
'10858905469',
'03219875432',
'21292183500',
'99123282568',
'09832684609',
'57862770030',
'08036819414',
'73647799220',
'75617757334',
'09250386605',
'05508574603',
'02468564162',
'10570042780',
'85004863768',
'02986340580',
'49254340472',
'02898451495',
'97098728500',
'08882466680',
'08678414600',
'98783890491',
'02269300769',
'11916845630',
'09565172776',
'95893059204',
'08617923601',
'00834287552',
'79425364320',
'41341822800',
'04454190674',
'72478063468',
'77715616168',
'03322064670',
'73144215104',
'57080470706',
'21473622808',
'11085764788',
'03275233440',
'69228817291',
'05342496470',
'94944814453',
'76807703791',
'07048959860',
'01742913610',
'03184632458',
'44414773253',
'98315781634',
'01712668706',
'53401360191',
'12164741684',
'00606829148',
'08518063680',
'07753130684',
'07008434693',
'08507991980',
'08864564608',
'08937779609',
'00245635106',
'93084188149',
'05601903603',
'32889734803',
'28220168870',
'08101026681',
'08202301629',
'13108353730',
'47093277691',
'09226707650',
'05703142679',
'07357750604',
'72699590487',
'08486005680',
'02746687429',
'15235024877',
'10018246877',
'35984775549',
'04437041470',
'60004455398',
'35767745803',
'05576861647',
'43388205272',
'08895113497',
'83054073300',
'21686901895',
'19362927420',
'10298889730',
'07455299419',
'34236214865',
'09655022609',
'84852330425',
'17973434755',
'03972341474',
'57770581400',
'01859801129',
'22750172837',
'43909019404',
'97346535120',
'28562481874',
'02866430140',
'09730569754',
'75874326715',
'10035786671',
'12531446800',
'34342685884',
'05286753469',
'44928548434',
'85402567468',
'79320023115',
'85310107487',
'00379651904',
'72913134220',
'76726061404',
'09937257751',
'86633473168',
'22023672848',
'09899393754',
'10173920489',
'01566277361',
'90424280582',
'01128535440',
'13975970898',
'12355975639',
'02250370419',
'25996061600',
'11423254660',
'08666546662',
'90073444200',
'38228599668',
'00309634199',
'27942808807',
'01011025264',
'74754769104',
'06400880402',
'30485571803',
'85022233720',
'13427812790',
'03687051617',
'08572118624',
'01070049174',
'09415914769',
'07843035761',
'12264175745',
'13518948709',
'62924095387',
'13674946726',
'06230732696',
'00771146710',
'02430655586',
'31040039472',
'97165832149',
'10753578700',
'06515575696',
'00794203116',
'07946580673',
'57628017134',
'07888502610',
'12471855750',
'33303592187',
'89608305420',
'06222915647',
'55618030187',
'32396545809',
'91455936553',
'09438504605',
'64280101434',
'98619470434',
'98827740678',
'03097895167',
'09957830473',
'01773329723',
'12250094640',
'14731493714',
'02063138451',
'13793895777',
'80887740120',
'86249509100',
'46735119568',
'72526700230',
'41960622889',
'12210247799',
'00621632309',
'32182986871',
'13458028625',
'04642123830',
'01097467597',
'00996245162',
'71552529215',
'00575074140',
'01418659380',
'09600983640',
'42420286871',
'10088266770',
'03027346431',
'04581329345',
'05977276435',
'12082863662',
'98214047153',
'44237316572',
'03100751736',
'17559323839',
'12959486803',
'03335172450',
'02728139156',
'01256600148',
'90290801400',
'11529517699',
'29758934856',
'74511688672',
'01578531608',
'04075108694',
'52621731287',
'21625455860',
'72572493420',
'69174750410',
'11646554779',
'15861882754',
'07355525760',
'36762302807',
'06491800628',
'08395052642',
'10908775601',
'31681984806',
'44525666854',
'01777635152',
'02909914984',
'34226586883',
'35265485368',
'03777254479',
'09581214437',
'07484436739',
'07414446662',
'88722260153',
'28855841491',
'30916203875',
'02277853470',
'25246801420',
'03836744414',
'69244499487',
'00835529525',
'04738282603']);
$cpfsr = createNewArrayCPFS(['08591728483',
'69469032420',
'12365144756',
'03622948442',
'33349078800',
'04831097462',
'06129212631',
'98911392120',
'01279960108',
'80295584491',
'07562792674',
'06284476639',
'73507946149',
'02446607438',
'12499213680',
'06984717680',
'04099374440',
'00843146133',
'02789688486',
'07540822457',
'10081477708',
'02368543139',
'71952462720',
'13435130733',
'03217275098',
'62606751191',
'39285612865',
'09704093705',
'79536735253',
'12708556622',
'38876134816',
'02008945103',
'57429782434']);
$cpfse = createNewArrayCPFS([]);
$codigo 	            = 'CCMACS2018B2';
$datai 					= "01/11/2018 08:00:00";
$dataf 					= "30/11/2018 00:00:00";
$vagas                  = 1200; //Número de vagas ofertadas
$chhoraria 			    = 2400; //Carga horaria do curso - Número em minutos
$tema        			= "C04.588.180"; //Tema do curso
$curso->addCurso($codigo, $datai, $dataf, $vagas, $tema, $chhoraria, 
$cpfsm,     //matriculados
$cpfsc,     //concluintes
$cpfse,     //evadidos
$cpfsr);    //reprovados
$atividade->addAtividade($codigo, $datai, $chhoraria, TipoAtividade::CURSO, $tema);
for($i=0;$i<count($cpfsm);$i++) {
	$sql = "select 	itp.nome, itp.codigo_cbo, itp.estabelecimento_codigo_cnes, coalesce(itp.equipe_codigo_ine, 'null') as equipe_codigo_ine, tu.fl_sexo
from integracao.tb_profissional as itp 
inner join tb_profissional tp on(itp.cpf=replace(replace(tp.nr_cpf, '.', ''), '-', ''))
inner join tb_usuario tu on(tp.ci_profissional=tu.ci_usuario)
where itp.cpf = '" . $cpfsm[$i] . "'";	
	$q = query($sql)->fetch();
	if($q['codigo_cbo'] != '' || $q['estabelecimento_codigo_cnes'] != '') {
		$atividade->addParticipacaoAtividade($codigo, $datai, $cpfsm[$i], 
		$q['codigo_cbo'], maskInep($q['estabelecimento_codigo_cnes']), null, GrauSatisfacao::SATISFEITO);  	
		$fl_sexo = "M";
		if($q['fl_sexo'] == '2'){
			$fl_sexo = "F";
		}
		$profissionalTeleconsultorias->addProfissionalSaude(null, $cpfsm[$i], $q['nome'], maskInep($q['estabelecimento_codigo_cnes']), $q['codigo_cbo'], null, "02", $fl_sexo);
	}
}



////////////////////////////////////////////////////////////////
//INTEGRA
$url = 'http://smart.telessaude.ufrn.br/';
$integra = new Integra("ad9c2aa3622033fc9d79703fde22a4e892641221");





////////////////////////////////////////////////////////////////
echo "<br/><br/><fieldset><legend>Teleconsultoria - Profissionais de Saúde</legend>";
$dados_profissionalTeleconsultorias = Integra::serializar(TipoDeDados::JSON, $profissionalTeleconsultorias);
echo "<h3>.: Dados Serializados - Profissional de Saúde :.</h3>";
echo $dados_profissionalTeleconsultorias;
$resposta_profissional = $integra->enviarDados(TipoDeDados::JSON, $url."api/v2/profissionais-saude/?format=json", $dados_profissionalTeleconsultorias);
echo "<h3>.: Resposta do Servidor - Profissional de Saúde :.</h3>";
echo $resposta_profissional;
echo "</fieldset>";



echo "<br/><br/><fieldset><legend>Cursos</legend>";
$dados_serializados_curso = Integra::serializar(TipoDeDados::JSON, $curso);
echo "<h3>.: Dados Serializados - Curso :.</h3>";
echo $dados_serializados_curso;
$resposta_curso = $integra->enviarDados(TipoDeDados::JSON, $url."api/v2/cursos-teleeducacao/?format=json", $dados_serializados_curso);
echo "<h3>.: Resposta do Servidor - Curso :.</h3>";
echo $resposta_curso;
echo "</fieldset>";




echo "<br/><br/><fieldset><legend>Atividades de Tele-educação</legend>";
$dados_serializados_atividade = Integra::serializar(TipoDeDados::JSON, $atividade);
echo "<h3>.: Dados Serializados - Atividades de Tele-educação :.</h3>";
echo $dados_serializados_atividade;
$resposta_atividade = $integra->enviarDados(TipoDeDados::JSON, $url."api/v2/atividades-teleeducacao/?format=json", $dados_serializados_atividade);
echo "<h3>.: Resposta do Servidor - Atividades de Tele-educação :.</h3>";
echo $resposta_atividade;
echo "</fieldset>";
                        


?>